{% include "navbar.html" %}
{% load static from staticfiles %}
<script>
    $(document).ready(function(){
        var value = $('#followbutton').val();
        if (value == 0){
            $("#followed").hide();
            $("#follow").show();
        }
        else{
            $("#followed").show();
            $("#follow").hide();
        }
    });
</script>
<style>
a {
    text-decoration: none;
}</style>
        <br>
        <div  class="flow-text">
            <div class="row">
                <div class="col m2 s8 offset-m3 offset-s2">
                    <img style="width: 100%;" class="circle responsive-img" src="/static/images/thumbnail/{{ username }}.jpg">
                </div>
                <div class="col m6 s12">
                        
                        <div style="font-size: 30px; color: black;"> <b>{{ fullname }}</b> </div>
                        <div style="margin-top: 5px; font-size: 20px; color: #666; font-weight: 400;"> @{{ username }} </div>
                        <div style="font-size: 20px; color: #666; font-weight: 400;"> User since {{ datejoined }} </div>
                        <div style="font-size: 20px; color: #666; font-weight: 400;"> Total Blog Published: {{ blog_num }} </div>
                        <div style="font-size: 20px; color: #666; font-weight: 400;"> Total Views: {{ total_views }} </div>
                        <br>
                        <button class="btn waves-effect waves-light black" type="submit" name="action" value='{{ followcheck }}' style="text-transform: none;" id="followbutton">

                            <span id="follow" >
                                <i class="fa fa-user-plus" style="font-size: 1.1rem;"></i>ollow | <span class="follownum">{{followers}}</span>
                            </span>
                            <span id="followed" style="display: none;"> 
                                <i class="fa fa-user-plus" style="font-size: 1.1rem;"></i>ollowed <i class="fa fa-check" style="font-size: 1.1rem;"></i> | <span class="follownum">{{followers}}</span>
                            </span>
                        </button>
                        <br>
                </div>

            </div>
        </div>
        <br>
 
        <nav>
            <div class="nav-wrapper black flow-text">
                <div class="col s12">
                    <a href="/" class="breadcrumb"  style="padding-left: 1%;"><b>Home</b></a>
                    <a href="/@{{ username|urlencode }}/" class="breadcrumb"><b>{{ fullname }}</b></a>
                </div>
            </div>
        </nav>
        <div class="row">
        
        {% csrf_token %}
        {% if blog_num > 0 %}
            {% for each in blogs %}
                <div class="col l4 m6 s12">
                    <div class="card">
                        <div class="card-image waves-effect waves-block waves-light" >
                            <a href="/@{{ username|urlencode }}/{{ each.url|urlencode }}/">
                                <img class="activator" style="object-fit: cover; object-position: center; height: 300px; width: 100%;" src="/static/images/parallax1.jpg">
                            </a>
                        </div>
                        <div class="card-content">
                            <span class="card-title activator grey-text text-darken-4">
                                <a href="/@{{ username|urlencode }}/{{ each.url|urlencode }}/" class="activator grey-text text-darken-4">
                                    <b>{{ each.heading|truncatechars:30 }}</b>
                                </a>
                                <span class="">&nbsp;&nbsp;<i class="fa fa-ellipsis-v right  dropdown-trigger " href='#' data-target='dropdown1'>&nbsp;</i>&nbsp;</span>
                                  <!-- Dropdown Structure -->
                                <ul id='dropdown1' class='dropdown-content' data-constrainWidth="false" style="box-shadow: 5px 5px 10px #222; width: 200px;">
                                    <li><a href="#!">one</a></li>
                                    <li><a href="#!">two</a></li>
                                    <li><a href="#!">three</a></li>
                                    <li><a href="#!">four</a></li>
                                    <li><a href="#!">five</a></li>
                                </ul>
                            </span>
                            <p style="font-size: 19px;">
                                <span>{{ each.date }}</span>
                                <span class="right">Views: <b>{{ each.views_num }}</b> </span> 
                            </p>
                        </div>
                    </div>
                </div>
                
            {% endfor %}
        {% endif %}
        </div>
<script>
    $(document).ready(function(){
        $('.dropdown-trigger').dropdown();
        $("#followbutton").click(function(){
            $.ajax({
                type: 'POST',
                url: '/followplus/',
                async: false,
                data: {
                    profile: '{{username}}',
                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                },
                success: function(result){
                    if (result['status']==200){
                        if (result['stats'] == 1){
                            $("#followed").show();
                            $("#follow").hide();
                            $(".follownum").text(result['follownum']);
                        }
                        else{
                            $("#follow").show();
                            $("#followed").hide();
                            $(".follownum").text(result['follownum']);
                        }
                    }
                }
            });
        });
    });

</script>
    </body>
</html>