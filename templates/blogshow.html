<html>
    <head>
        <title>{{heading}} | Blog</title>
        <link href="/static/css/materialize.min.css" rel="stylesheet">
        <script src="/static/js/materialize.min.js"></script>
        <script src="/static/js/jquery.min.js"></script>
        <link rel="stylesheet" href="/static/css/font-awesome.min.css" />
        <style>
            body { 
                font-family: "Helvetica Neue"; 
                font-size: 24px; 
                font-style: normal; 
                font-variant: normal; 
                font-weight: 300; 
                line-height: 28.8px; 
                filter: invert(0);
            }
        </style>
    </head>
    <body>
        
            <div class="navbar-fixed">
            <nav>
              <div class="nav-wrapper grey lighten-3 ">
                <a href="#!" class="brand-logo black-text text-darken-2">Logo</a>
                <ul class="right hide-on-med-and-down black-text text-darken-2">
                  
                  <li>
                    <div class="switch">
                        <label>
                            Off
                            <input type="checkbox" id="colortoggle">
                            <span class="lever"></span>
                            On
                        </label>
                    </div>
                  </li>
                  <li><a href="sass.html">Sass</a></li>
                  <li><a href="badges.html">Components</a></li>

                </ul>
              </div>
            </nav>
          </div>
        <div class="parallax-container">
            <div class="parallax"><img src="/static/images/parallax1.jpg"></div>
        </div>
            
        <div class="section white">
                <div class="row container">
                  <h2 class="header">Parallax</h2>
                  <p class="grey-text text-darken-3 lighten-3">Parallax is an effect where the background content or image in this case, is moved at a different speed than the foreground content while scrolling.</p>
                </div>
              </div>

        <div id="doc" to="0" class="section white">
            <div class="row" style="">
                <div class="col s12 m2 l2 grey valign-wrapper center-align" style="min-height: 100vh;"><p>Ads</p></div>
                <div class="col s12 m8 l8" style="padding: 5vh 5vw;">
                    <div>
                        <h1>{{heading}}</h1>
                        <div style="font-size: 22px; letter-spacing: 0.0625em; ">{{data|safe}}</div>
                    </div>
                    <div id="likes">Likes <i class="fa fa-heart" style="color: red;" aria-hidden="true"></i></div>
                    <div>
                        <div id="comments"> </div>
                    </div>
                </div>
                <div class="col s12 m2 l2 grey valign-wrapper center-align" style="min-height: 100vh;"><p>Ads</p></div>
            </div>            
        </div>
        {% csrf_token %}
    </body>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('.sidenav');
            var instances = M.Sidenav.init(elems, options);
        });

        // Or with jQuery
        $(document).ready(function(){
            $('.sidenav').sidenav();
        });

        $(document).ready(function(){
            $.ajax({
                type: 'POST',
                url: '/commentload/',
                data: {
                    heading: '{{heading}}',
                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                },
                success: function(result){
                    var output = result['status'];
                    if (output == 200){
                        console.log(result['error']);
                        console.log(output);
                        comments = result['data'];
                        console.log(comments);
                        for(var i = 0; i < comments.length; i+=1){
                            $("#comments").append("<div><div><b>"+comments[i]['user']+"</b></div><div>"+comments[i]['comment']+"</div><div>"+comments[i]['date']+"</div>");
                            for(var j = 0; j < comments[i]['commentthread'].length; j+=1){
                                $("#comments").append("<div style='margin-left: 5%; font-size: 20px;'><div>"+comments[i]['commentthread'][j]['user']+"</div><div>"+comments[i]['commentthread'][j]['thread']+"</div><div>"+comments[i]['commentthread'][j]['date']+"</div></div>");
                            }
                            $("#comments").append("</div><br>");
                        }
                    }
                    else{
                        console.log(output);
                    }
                }
            })

        });
        $(".switch").find("#colortoggle").on("change",function() {
            var value = $("#doc").attr('to');
            $("span").css("color", "");
            $("span").css("background-color", "");
            if (value == 0){
                $("#doc").css("background-color", "#222");
                $("#doc").css("color", "#eee");
                $("#doc").attr('to',1);
            }
            else{
                $("#doc").css("background-color", "#fff");
                $("#doc").css("color", "#000");
                $("#doc").attr('to',0);
            }
        });
        $(document).ready(function(){
            $('.parallax').parallax();
        });

    </script>
    <!--

            -->
</html>